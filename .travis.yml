language: python

python:
  - "3.5"
  - "3.6"
  - "nightly"

install:
  - pip install sphinx
  - python setup.py install

# TODO: replace this with a bonafide test suite
script:
  - repairbox -h
  - repairbox tool -h
  - repairbox source -h
  - repairbox artefact -h
  - repairbox container -h
  - repairbox tool list
  - repairbox source list
  - repairbox artefact list

before_deploy:
  - (cd docs && make html && cd _build/html && touch .nojekyll)

deploy:
  provider: pages
  skip_cleanup: true
  local_dir: docs/_build/html
  github_token: $GITHUB_TOKEN
  on:
    branch: master
